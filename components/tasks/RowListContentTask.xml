<?xml version="1.0" encoding="UTF-8"?>

<!--********** Copyright 2016 Roku Corp.  All Rights Reserved. **********-->

<component name="RowListContentTask" extends="Task">

    <interface>
        <field id="content" type="node" />
    </interface>
	
	<script type= "text/brightscript" uri = "pkg:/components/Config.brs"/>
    <script type="text/brightscript">

        <![CDATA[
			Sub Init()
			    m.top.functionName = "loadContent"
			End Sub
    
			Sub loadContent()
				array = loadConfig()                           ' 1. Canales Locales (loadConfig siempre primero)
                arraydos = loadConfigMusica()                  ' 2. Música
                arraytres = loadConfigReligion()               ' 3. Religión
                arraycuatro = loadConfigEntretenimiento()      ' 4. Entretenimiento
                arraycinco = loadConfigTurismo()               ' 5. Turismo
                arrayseis = loadConfigRadioTv()                ' 6. Radio Tv
                arraysiete = loadConfigDeportes()              ' 7. Deportes
                arrayocho = loadConfigCultural()               ' 8. Cultural/Educativo
                arraynueve = loadConfigDocumentales()          ' 9. Documentales
                arraydiez = loadConfigEstiloVida()             ' 10. Estilo de Vida
                arrayonce = loadConfigCanales24()              ' 11. Canales 24/7
                arraydoce = loadConfigNovelasySeries()         ' 12. Novelas Y Series
                arraytrece = loadConfigSeries()                ' 13. Series
                arraycatorce = loadConfigInternacional()       ' 14. Internacional
                arrayquince = loadConfigCine()                 ' 15. Cine
                arraydieciseis = loadConfigPremium()           ' 16. Premium
                arraydiecisiete = loadConfigAnime()            ' 17. Anime
                arraydieciocho = loadConfigInfantil()          ' 18. Infantil
                arraydiecinueve = loadConfigNoticias()         ' 19. Noticias
                arrayveinte = loadConfigAdultos()              ' 20. Adultos

			    oneRow = GetApiArray(array)
                tworow = GetApiArraydos(arraydos)
                threerow = GetApiArraytres(arraytres)
                fourrow = GetApiArraycuatro(arraycuatro)
                fiverow = GetApiArraycinco(arraycinco)
                sixrow = GetApiArrayseis(arrayseis)
                sevenrow = GetApiArraysiete(arraysiete)
                eihtrow = GetApiArrayocho(arrayocho) 
                ninerow = GetApiArraynueve(arraynueve) 
                tenrow = GetApiArraydiez(arraydiez)  
                elevenrow = GetApiArrayonce(arrayonce)
                twelverow = GetApiArraydoce(arraydoce)
                thirteenrow = GetApiArraytrece(arraytrece)
                fourteenrow = GetApiArraycatorce(arraycatorce)
                fifteenrow = GetApiArrayquince(arrayquince)
                sixteenrow = GetApiArraydieciseis(arraydieciseis)
                seventeenrow = GetApiArraydiecisiete(arraydiecisiete)
                eighteenrow = GetApiArraydieciocho(arraydieciocho)
                nineteenrow = GetApiArraydiecinueve(arraydiecinueve)
                twentyrow = GetApiArrayveinte(arrayveinte)

			    list = [
			        {
			            Title:"Canales Locales"
			            ContentList : oneRow
			        }
                    {
			            Title:"Música"
			            ContentList : twoRow
			        }
                    {
			            Title:"Religión"
			            ContentList : threerow
			        }
                    {
			            Title:"Entretenimiento"
			            ContentList : fourrow
			        }
                    {
			            Title:"Turismo"
			            ContentList : fiverow
			        }
                    {
			            Title:"Radio Tv"
			            ContentList : sixrow
			        }
                    {
			            Title:"Deportes"
			            ContentList : sevenrow
			        }
                    {
			            Title:"Cultural/Educativo"
			            ContentList : eihtrow
			        }
                    {
			            Title:"Documentales"
			            ContentList : ninerow
			        }
                    {
			            Title:"Estilo de Vida"
			            ContentList : tenrow
			        }
                    {
			            Title:"Canales 24/7"
			            ContentList : elevenrow
			        }
                    {
			            Title:"Novelas Y Series"
			            ContentList : twelverow
			        }
                    {
			            Title:"Series"
			            ContentList : thirteenrow
			        }
                    {
			            Title:"Internacional"
			            ContentList : fourteenrow
			        }
                    {
			            Title:"Cine"
			            ContentList : fifteenrow
			        }
                    {
			            Title:"Premium"
			            ContentList : sixteenrow
			        }
                    {
			            Title:"Anime"
			            ContentList : seventeenrow
			        }
                    {
			            Title:"Infantil"
			            ContentList : eighteenrow
			        }
                    {
			            Title:"Noticias"
			            ContentList : nineteenrow
			        }
                    {
			            Title:"Adultos"
			            ContentList : twentyrow
			        }
			    ]                            
			    m.top.content = ParseXMLContent(list)
			End Sub
			
			Function ParseXMLContent(list As Object)
			    RowItems = createObject("RoSGNode","ContentNode")
			    
			    for each rowAA in list
			        row = createObject("RoSGNode","ContentNode")
			        row.Title = rowAA.Title
			
			        for each itemAA in rowAA.ContentList
			            item = createObject("RoSGNode","ContentNode")
			            item.SetFields(itemAA)
			            row.appendChild(item)
			        end for
			        RowItems.appendChild(row)
			    end for
			
			    return RowItems
			End Function
			
			Function GetApiArray(array as Object)
			    result = []
			    for each element in array
			    	item = {}
			    	item.Title = element.Title
			    	item.streamFormat = element.streamFormat
			    	item.HDPosterUrl = element.Logo
			    	item.Url = element.Stream
                    item.HttpCertificatesFile = element.UserAgent
                    item.HttpCookies = element.Cache
                    item.Live = element.Live			    	
			        result.push(item)
			    end for
			    return result
			End Function

            Function GetApiArraydos(arraydos as Object)
			    result = []
			    for each element in arraydos
			    	item = {}
			    	item.Title = element.Title
			    	item.streamFormat = element.streamFormat
			    	item.HDPosterUrl = element.Logo
			    	item.Url = element.Stream
                    item.HttpCertificatesFile = element.UserAgent
                    item.Live = element.Live
			        result.push(item)
			    end for
			    return result
			End Function

            Function GetApiArraytres(arraytres as Object)
			    result = []
			    for each element in arraytres
			    	item = {}
			    	item.Title = element.Title
			    	item.streamFormat = element.streamFormat
			    	item.HDPosterUrl = element.Logo
			    	item.Url = element.Stream
                    item.HttpCertificatesFile = element.UserAgent
                    item.Live = element.Live
			        result.push(item)
			    end for
			    return result
			End Function

			Function GetApiArraycuatro(arraycuatro as Object)
			    result = []
			    for each element in arraycuatro
			    	item = {}
			    	item.Title = element.Title
			    	item.streamFormat = element.streamFormat
			    	item.HDPosterUrl = element.Logo
			    	item.Url = element.Stream
                    item.ifSGNodeHttpAgentAccess = element.UserAgent
                    item.Live = element.Live
			        result.push(item)
			    end for
			    return result
			End Function

			Function GetApiArraycinco(arraycinco as Object)
			    result = []
			    for each element in arraycinco
			    	item = {}
			    	item.Title = element.Title
			    	item.streamFormat = element.streamFormat
			    	item.HDPosterUrl = element.Logo
			    	item.Url = element.Stream
                    item.ifSGNodeHttpAgentAccess = element.UserAgent
                    item.Live = element.Live
			        result.push(item)
			    end for
			    return result
			End Function

			Function GetApiArrayseis(arrayseis as Object)
			    result = []
			    for each element in arrayseis
			    	item = {}
			    	item.Title = element.Title
			    	item.streamFormat = element.streamFormat
			    	item.HDPosterUrl = element.Logo
			    	item.Url = element.Stream
                    item.HttpCertificatesFile = element.UserAgent
                    item.Live = element.Live
			        result.push(item)
			    end for
			    return result
			End Function

			Function GetApiArraysiete(arraysiete as Object)
			    result = []
			    for each element in arraysiete
			    	item = {}
			    	item.Title = element.Title
			    	item.streamFormat = element.streamFormat
			    	item.HDPosterUrl = element.Logo
			    	item.Url = element.Stream
                    item.HttpCertificatesFile = element.UserAgent
                    item.Live = element.Live
			        result.push(item)
			    end for
			    return result
			End Function

			Function GetApiArrayocho(arrayocho as Object)
			    result = []
			    for each element in arrayocho
			    	item = {}
			    	item.Title = element.Title
			    	item.streamFormat = element.streamFormat
			    	item.HDPosterUrl = element.Logo
			    	item.Url = element.Stream
                    item.HttpCertificatesFile = element.UserAgent
                    item.Live = element.Live
			        result.push(item)
			    end for
			    return result
			End Function

			Function GetApiArraynueve(arraynueve as Object)
			    result = []
			    for each element in arraynueve
			    	item = {}
			    	item.Title = element.Title
			    	item.streamFormat = element.streamFormat
			    	item.HDPosterUrl = element.Logo
			    	item.Url = element.Stream
                    item.HttpCertificatesFile = element.UserAgent
                    item.drmParams = element.drmParams
                    item.Live = element.Live
			        result.push(item)
			    end for
			    return result
			End Function

			Function GetApiArraydiez(arraydiez as Object)
			    result = []
			    for each element in arraydiez
			    	item = {}
			    	item.Title = element.Title
			    	item.streamFormat = element.streamFormat
			    	item.HDPosterUrl = element.Logo
			    	item.Url = element.Stream
                    item.HttpCertificatesFile = element.UserAgent
                    item.drmParams = element.drmParams
                    item.GetKeepAlive = element.GetKeepAlive
                    item.Live = element.Live
			        result.push(item)
			    end for
			    return result
			End Function

            Function GetApiArrayonce(arrayonce as Object)
			    result = []
			    for each element in arrayonce
			    	item = {}
			    	item.Title = element.Title
			    	item.streamFormat = element.streamFormat
			    	item.HDPosterUrl = element.Logo
			    	item.Url = element.Stream
                    item.HttpCertificatesFile = element.UserAgent
                    item.Live = element.Live
			        result.push(item)
			    end for
			    return result
			End Function

			Function GetApiArraydoce(arraydoce as Object)
			    result = []
			    for each element in arraydoce
			    	item = {}
			    	item.Title = element.Title
			    	item.streamFormat = element.streamFormat
			    	item.HDPosterUrl = element.Logo
			    	item.Url = element.Stream
                    item.HttpCertificatesFile = element.UserAgent
                    item.Live = element.Live
			        result.push(item)
			    end for
			    return result
			End Function

			Function GetApiArraytrece(arraytrece as Object)
			    result = []
			    for each element in arraytrece
			    	item = {}
			    	item.Title = element.Title
			    	item.streamFormat = element.streamFormat
			    	item.HDPosterUrl = element.Logo
			    	item.Url = element.Stream
                    item.HttpCertificatesFile = element.UserAgent
                    item.Live = element.Live
			        result.push(item)
			    end for
			    return result
			End Function

			Function GetApiArraycatorce(arraycatorce as Object)
			    result = []
			    for each element in arraycatorce
			    	item = {}
			    	item.Title = element.Title
			    	item.streamFormat = element.streamFormat
			    	item.HDPosterUrl = element.Logo
			    	item.Url = element.Stream
                    item.HttpCertificatesFile = element.UserAgent
                    item.Live = element.Live
			        result.push(item)
			    end for
			    return result
			End Function

			Function GetApiArrayquince(arrayquince as Object)
			    result = []
			    for each element in arrayquince
			    	item = {}
			    	item.Title = element.Title
			    	item.streamFormat = element.streamFormat
			    	item.HDPosterUrl = element.Logo
			    	item.Url = element.Stream
                    item.HttpCertificatesFile = element.UserAgent
                    item.Live = element.Live
			        result.push(item)
			    end for
			    return result
			End Function

			Function GetApiArraydieciseis(arraydieciseis as Object)
			    result = []
			    for each element in arraydieciseis
			    	item = {}
			    	item.Title = element.Title
			    	item.streamFormat = element.streamFormat
			    	item.HDPosterUrl = element.Logo
			    	item.Url = element.Stream
                    item.HttpCertificatesFile = element.UserAgent
                    item.Live = element.Live
			        result.push(item)
			    end for
			    return result
			End Function

			Function GetApiArraydiecisiete(arraydiecisiete as Object)
			    result = []
			    for each element in arraydiecisiete
			    	item = {}
			    	item.Title = element.Title
			    	item.streamFormat = element.streamFormat
			    	item.HDPosterUrl = element.Logo
			    	item.Url = element.Stream
                    item.HttpCertificatesFile = element.UserAgent
                    item.Live = element.Live
			        result.push(item)
			    end for
			    return result
			End Function

			Function GetApiArraydieciocho(arraydieciocho as Object)
			    result = []
			    for each element in arraydieciocho
			    	item = {}
			    	item.Title = element.Title
			    	item.streamFormat = element.streamFormat
			    	item.HDPosterUrl = element.Logo
			    	item.Url = element.Stream
                    item.HttpCertificatesFile = element.UserAgent
                    item.Live = element.Live
			        result.push(item)
			    end for
			    return result
			End Function

			Function GetApiArraydiecinueve(arraydiecinueve as Object)
			    result = []
			    for each element in arraydiecinueve
			    	item = {}
			    	item.Title = element.Title
			    	item.streamFormat = element.streamFormat
			    	item.HDPosterUrl = element.Logo
			    	item.Url = element.Stream
                    item.HttpCertificatesFile = element.UserAgent
                    item.Live = element.Live
			        result.push(item)
			    end for
			    return result
			End Function

			Function GetApiArrayveinte(arrayveinte as Object)
			    result = []
			    for each element in arrayveinte
			    	item = {}
			    	item.Title = element.Title
			    	item.streamFormat = element.streamFormat
			    	item.HDPosterUrl = element.Logo
			    	item.Url = element.Stream
                    item.HttpCertificatesFile = element.UserAgent
                    item.Live = element.Live
			        result.push(item)
			    end for
			    return result
			End Function
]]>
    </script>
</component>
