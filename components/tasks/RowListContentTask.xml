<?xml version="1.0" encoding="UTF-8"?>

<!--********** Copyright 2016 Roku Corp.  All Rights Reserved. **********-->


<component name="RowListContentTask" extends="Task">

    <interface>
        <field id="content" type="node" />
    </interface>
	
	<script type= "text/brightscript" uri = "pkg:/components/Config.brs"/>
    <script type="text/brightscript">

        <![CDATA[
			Sub Init()
			    m.top.functionName = "loadContent"
			End Sub
    
			Sub loadContent()
				array = loadConfig()
                                arraydos = loadConfigNovelas()
                                arraytres = loadConfigDiscoverys()
                                arraycuatro = loadConfigCartoons()
                                arraycinco = loadConfigPremium()
                                arrayseis = loadConfigPeliculas()
                                arraysiete = loadConfigMusic()
                                arrayocho = loadConfigPluto()
                                arraynueve = loadConfigSports()
                                arraydiez = loadConfig24hrs()
                                arrayonce= loadConfigPeru()
                                arraydoce= loadConfigMovistar()
                                arraytrece= loadConfigNoticias()
			    oneRow = GetApiArray(array)
                            tworow = GetApiArraydos(arraydos)
                            threerow = GetApiArraytres(arraytres)
                            fourrow = GetApiArraycuatro(arraycuatro)
                            fiverow = GetApiArraycinco(arraycinco)
                            sixrow = GetApiArrayseis(arrayseis)
                            sevenrow = GetApiArraysiete(arraysiete)
                            eihtrow = GetApiArrayocho(arrayocho) 
                            ninerow = GetApiArraynueve(arraynueve) 
                            tenrow = GetApiArraydiez(arraydiez)  
                            elevenrow = GetApiArrayonce(arrayonce)
                            twelverow = GetApiArraydoce(arraydoce)
                            thirteenrow = GetApiArraytrece(arraytrece)
			    list = [
			        {
			            Title:"My Channels"
			            ContentList : oneRow
			        }
                                {
			            Title:"My Channels"
			            ContentList : twoRow
			        }
                                {
			            Title:"My Channels"
			            ContentList : threerow
			        }
                                {
			            Title:"My Channels"
			            ContentList : fourrow
			        }
                                {
			            Title:"My Channels"
			            ContentList : fiverow
			        }
                                {
			            Title:"My Channels"
			            ContentList : sixrow
			        }
                                {
			            Title:"My Channels"
			            ContentList : sevenrow
			        }
                                {
			            Title:"My Channels"
			            ContentList : eihtrow
			        }
                                {
			            Title:"My Channels"
			            ContentList : ninerow
			        }
                                {
			            Title:"My Channels"
			            ContentList : tenrow
			        }
                                {
			            Title:"My Channels"
			            ContentList : twelverow
			        }
                                {
			            Title:"My Channels"
			            ContentList : elevenrow
			        }
                                {
			            Title:"My Channels"
			            ContentList : thirteenrow
			        }
			    ]                            
			    m.top.content = ParseXMLContent(list)
			End Sub
			
			Function ParseXMLContent(list As Object)
			    RowItems = createObject("RoSGNode","ContentNode")
			    
			    for each rowAA in list
			        row = createObject("RoSGNode","ContentNode")
			        row.Title = rowAA.Title
			
			        for each itemAA in rowAA.ContentList
			            item = createObject("RoSGNode","ContentNode")
			            item.SetFields(itemAA)
			            row.appendChild(item)
			        end for
			        RowItems.appendChild(row)
			    end for
			
			    return RowItems
			End Function
			
			
			Function GetApiArray(array as Object)
			    result = []
			    for each element in array
			    	item = {}
			    	item.Title = element.Title
			    	item.streamFormat = element.streamFormat
			    	item.HDPosterUrl = element.Logo
			    	item.Url = element.Stream
                                item.HttpCertificatesFile = element.UserAgent
                                item.HttpCookies = element.Cache
                                item.Live = element.Live			    	
			        result.push(item)
			    end for
			    return result
			End Function

                        Function GetApiArraydos(arraydos as Object)
			    result = []
			    for each element in arraydos
			    	item = {}
			    	item.Title = element.Title
			    	item.streamFormat = element.streamFormat
			    	item.HDPosterUrl = element.Logo
			    	item.Url = element.Stream
                                item.HttpCertificatesFile = element.UserAgent
                                item.Live = element.Live
			        result.push(item)
			    end for
			    return result
			End Function

                       Function GetApiArraytres(arraytres as Object)
			    result = []
			    for each element in arraytres
			    	item = {}
			    	item.Title = element.Title
			    	item.streamFormat = element.streamFormat
			    	item.HDPosterUrl = element.Logo
			    	item.Url = element.Stream
                                item.HttpCertificatesFile = element.UserAgent
                                item.Live = element.Live
			        result.push(item)
			    end for
			    return result
			End Function

			Function GetApiArraycuatro(arraycuatro as Object)
			    result = []
			    for each element in arraycuatro
			    	item = {}
			    	item.Title = element.Title
			    	item.streamFormat = element.streamFormat
			    	item.HDPosterUrl = element.Logo
			    	item.Url = element.Stream
                                item.ifSGNodeHttpAgentAccess = element.UserAgent
                                item.Live = element.Live
			        result.push(item)
			    end for
			    return result
			End Function

			Function GetApiArraycinco(arraycinco as Object)
			    result = []
			    for each element in arraycinco
			    	item = {}
			    	item.Title = element.Title
			    	item.streamFormat = element.streamFormat
			    	item.HDPosterUrl = element.Logo
			    	item.Url = element.Stream
                                item.ifSGNodeHttpAgentAccess = element.UserAgent
                                item.Live = element.Live
			        result.push(item)
			    end for
			    return result
			End Function

			Function GetApiArrayseis(arrayseis as Object)
			    result = []
			    for each element in arrayseis
			    	item = {}
			    	item.Title = element.Title
			    	item.streamFormat = element.streamFormat
			    	item.HDPosterUrl = element.Logo
			    	item.Url = element.Stream
                                item.HttpCertificatesFile = element.UserAgent
                                item.Live = element.Live
			        result.push(item)
			    end for
			    return result
			End Function

			Function GetApiArraysiete(arraysiete as Object)
			    result = []
			    for each element in arraysiete
			    	item = {}
			    	item.Title = element.Title
			    	item.streamFormat = element.streamFormat
			    	item.HDPosterUrl = element.Logo
			    	item.Url = element.Stream
                                item.HttpCertificatesFile = element.UserAgent
                                item.Live = element.Live
			        result.push(item)
			    end for
			    return result
			End Function

			Function GetApiArrayocho(arrayocho as Object)
			    result = []
			    for each element in arrayocho
			    	item = {}
			    	item.Title = element.Title
			    	item.streamFormat = element.streamFormat
			    	item.HDPosterUrl = element.Logo
			    	item.Url = element.Stream
                                item.HttpCertificatesFile = element.UserAgent
                                item.Live = element.Live
			        result.push(item)
			    end for
			    return result
			End Function

			Function GetApiArraynueve(arraynueve as Object)
			    result = []
			    for each element in arraynueve
			    	item = {}
			    	item.Title = element.Title
			    	item.streamFormat = element.streamFormat
			    	item.HDPosterUrl = element.Logo
			    	item.Url = element.Stream
                                item.HttpCertificatesFile = element.UserAgent
                                item.drmParams = element.drmParams
                                item.Live = element.Live
			        result.push(item)
			    end for
			    return result
			End Function

			Function GetApiArraydiez(arraydiez as Object)
			    result = []
			    for each element in arraydiez
			    	item = {}
			    	item.Title = element.Title
			    	item.streamFormat = element.streamFormat
			    	item.HDPosterUrl = element.Logo
			    	item.Url = element.Stream
                                item.HttpCertificatesFile = element.UserAgent
                                item.drmParams = element.drmParams
                                item.GetKeepAlive = element.GetKeepAlive
                                item.Live = element.Live
			        result.push(item)
			    end for
			    return result
			End Function

                         Function GetApiArrayonce(arrayonce as Object)
			    result = []
			    for each element in arrayonce
			    	item = {}
			    	item.Title = element.Title
			    	item.streamFormat = element.streamFormat
			    	item.HDPosterUrl = element.Logo
			    	item.Url = element.Stream
                                item.HttpCertificatesFile = element.UserAgent
                                item.Live = element.Live
			        result.push(item)
			    end for
			    return result
			End Function

			Function GetApiArraydoce(arraydoce as Object)
			    result = []
			    for each element in arraydoce
			    	item = {}
			    	item.Title = element.Title
			    	item.streamFormat = element.streamFormat
			    	item.HDPosterUrl = element.Logo
			    	item.Url = element.Stream
                                item.HttpCertificatesFile = element.UserAgent
                                item.Live = element.Live
			        result.push(item)
			    end for
			    return result
			End Function

			Function GetApiArraytrece(arraytrece as Object)
			    result = []
			    for each element in arraytrece
			    	item = {}
			    	item.Title = element.Title
			    	item.streamFormat = element.streamFormat
			    	item.HDPosterUrl = element.Logo
			    	item.Url = element.Stream
                                item.HttpCertificatesFile = element.UserAgent
                                item.Live = element.Live
			        result.push(item)
			    end for
			    return result
			End Function
]]>
    </script>
</component>

